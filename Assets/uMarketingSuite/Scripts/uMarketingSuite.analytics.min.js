window.uMarketingSuite=function(n){return n.analytics=function(){function ut(i){t.pageviewGuid=i;ei();vt();l.init();yt();ft();document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&ri()},!1);typeof n.init=="function"&&n.init()}function ft(){var n=[].slice.call(document.querySelectorAll("form")).filter(function(n){var t=a(n),i=v(n);return t!=null&&i!=null&&!n.hasAttribute("umarketingsuite-no-tracking")});n.forEach(function(n){et(n)})}function a(n){if(n==null)return null;var t=n.querySelector("input[name='FormId'][type='hidden']");return t==null?null:t.value}function v(n){if(n==null)return null;var t=n.querySelector("input[name='FormName'][type='hidden']");return t==null?null:t.value}function et(n){var o=a(n),i=st(o,!0)||{id:o,name:v(n),submitted:!1,raisedErrors:!1,timeStart:null,timeEnd:null,inViewPort:!1,actions:[],errors:[]},s,u,r,f,e;t.umbracoForms.push(i);s=[].slice.call(n.querySelectorAll("input,textarea,select")).filter(function(n){return n.type!=="hidden"&&n.type!=="button"&&n.type!=="submit"&&!n.hasAttribute("umarketingsuite-no-tracking")});s.forEach(function(n){ht(n,i)});u=!0;u&&(r=document.createElement("input"),r.type="hidden",r.name="__uMarketingSuiteAnalyticsPageviewId",r.value=t.pageviewGuid,f=n.querySelector("input"),f!=null?n.insertBefore(r,f):n.appendChild(r));e=n.onsubmit;n.onsubmit=function(r){if(typeof e=="function"&&e.apply(n,arguments),!u||r.submitter!=null&&r.submitter.classList.contains("cancel")){ot(i);var f=t.umbracoForms.indexOf(i);f!==-1&&t.umbracoForms.splice(f,1)}else i.submitted=!0,i.timeEnd=Math.floor(+new Date/1e3)};at(i,n)}function y(){return window.sessionStorage!=null&&typeof window.sessionStorage.setItem=="function"&&typeof window.sessionStorage.getItem=="function"}function ot(n){if(y()){var t=JSON.stringify(n),i=p(n.id);sessionStorage[i]=t}}function st(n,t){if(y()){var i=p(n),r=sessionStorage[i];if(t&&sessionStorage.removeItem(i),r!=null)try{return JSON.parse(r)}catch(u){return null}}}function p(n){return"uMarketingSuite-form-"+n}function ht(n,t){function i(i){lt(n,i,t)}function f(){t.timeStart==null&&(t.timeStart=Math.floor(+new Date/1e3))}var r,e,o;n.addEventListener("focus",function(){i(u.FOCUS)},{passive:!0});n.addEventListener("blur",function(){var t=ct(n);t==null||t.length===0?i(u.UNFOCUS_NO_DATA_ENTERED):i(u.UNFOCUS_DATA_ENTERED)},{passive:!0});n.addEventListener("keyup",f,{passive:!0,once:!0});n.addEventListener("change",f,{passive:!0,once:!0});n.addEventListener("invalid",function(){w(n,"validation",t)},{passive:!0});r=n.parentNode.querySelector("span[data-valmsg-for]");r!=null&&(e=new MutationObserver(function(i){for(var u,f,r=0;r<i.length;r++)u=i[r],u.type==="attributes"&&u.target.className.indexOf("error")>-1&&u.oldValue.indexOf("valid")>-1&&(f="validation",w(n,f,t))}),o={attributes:!0,attributeFilter:["class"],attributeOldValue:!0},e.observe(r,o))}function ct(n){return n==null?"":n.value}function lt(n,t,i){if(i!=null){Array.isArray(i.actions)||(i.actions=[]);var r=b(n),u=d(n),f={timestamp:Math.floor(+new Date/1e3),field:r,fieldKey:u,action:t};i.actions.push(f)}}function w(n,t,i){if(i!=null){i.raisedErrors=!0;Array.isArray(i.errors)||(i.errors=[]);var r=b(n),u=d(n),f={timestamp:Math.floor(+new Date/1e3),field:r,fieldKey:u,errorType:t};i.errors.push(f)}}function b(n){var t=k(n),i;return t?(i=document.querySelector("label[for='"+t+"']"),i!=null?i.textContent.replace(/^\s*|[*\s]*$/g,""):t):"<UNKNOWN>"}function k(n){var t=n.id;return t?t.replace(/_\d+$/,""):null}function d(n){return n.dataset.umb!=null?n.dataset.umb.replace(/_\d+$/,""):k(n)}function at(n,t){function r(t){for(var r=0;r<t.length;r++)if(t[r].isIntersecting){n.inViewPort=!0;i.disconnect();break}}if(typeof IntersectionObserver=="function"){var i=new IntersectionObserver(r,{threshold:0});i.observe(t)}}function vt(){function n(n){var r=n.target.closest("a");if(r!=null&&r.href!=null&&r.href.length!==0&&(n.button===0||n.button===1)){var i=r.href,u=window.location.origin,f=i.indexOf("http")===0&&i.indexOf(u)!==0,e=/\.(?:pdf|doc|docx)(?:\?|$)/i.test(i),o=i.indexOf("#")===0||i.indexOf(u+"/#")===0,s=i.indexOf("mailto:")===0||i.indexOf("tel:")===0,h=f||e||o||s;h&&t.links.push({href:i,timeClicked:new Date})}}document.addEventListener("click",n);document.addEventListener("auxclick",n)}function yt(){pt();wt();bt()}function pt(){var n,t;if(Object.defineProperty(HTMLMediaElement.prototype,"playing",{get:function(){return this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2}}),n=document.querySelectorAll("video"),n.length!==0)for(t=0;t<n.length;t++)g(n[t])}function o(n){function u(){f();t=e();i=setTimeout(function(){r();u()},1e3)}function f(){i!=null&&(r(),clearTimeout(i),i=null,t=null)}function r(){if(t!=null){var i=e(),r=Math.floor((i-t)/1e3);n(r);t=i}}var t=null,i=null;return{start:u,stop:f,update:r}}function g(n){function e(){return Math.floor(n.currentTime)}function a(){if(u.totalLengthInSeconds=Math.floor(n.duration),n.currentSrc!=null&&n.currentSrc.length>0){u.url=n.currentSrc;var t=n.currentSrc.split("/");u.name=t[t.length-1]}}var u;if(n!=null){u={name:null,source:f.FILE,url:null,totalTimeWatchedInSeconds:0,totalLengthInSeconds:0,inViewPort:!1,watched:!1,timestamp:Math.floor(+new Date/1e3),events:[]};t.videos.push(u);var c=!0,h=!1,l=o(function(n){u.totalTimeWatchedInSeconds+=n});n.readyState>0?a():n.addEventListener("loadedmetadata",a,{once:!0,passive:!0});n.addEventListener("play",function(){c&&n.autoplay?r(u,i.AUTOPLAY,e()):h?r(u,i.RESUME,e()):r(u,i.PLAY,e());h=!1;c=!1;l.start()},{passive:!0});n.addEventListener("pause",function(){var t=n.currentTime===n.duration;r(u,t?i.ENDED:i.PAUSE,e());h=!t;l.stop()},{passive:!0});n.addEventListener("seeked",function(){r(u,i.SEEK,e())},{passive:!0});n.addEventListener("playing",function(){u.watched=!0},{passive:!0});s(u,n)}}function r(n,t,i){if(n!=null){Array.isArray(n.events)||(n.events=[]);var r={timestamp:Math.floor(+new Date/1e3),action:t,startTimeInVideoInSeconds:i};n.events.push(r)}}function s(n,t){function r(t){for(var r=0;r<t.length;r++)if(t[r].isIntersecting){n.inViewPort=!0;i.disconnect();break}}if(typeof IntersectionObserver=="function"){var i=new IntersectionObserver(r,{threshold:1});i.observe(t)}}function wt(){var n=document.querySelectorAll("iframe[src*='youtube.com'][src*='enablejsapi=1'],iframe[src*='youtube-nocookie.com'][src*='enablejsapi=1']");n.length!==0&&nt(function(t){if(typeof t.Player=="function")for(var i=0;i<n.length;i++)h(n[i],t)})}function h(n,u){function v(){return c==null?0:Math.floor(c.getCurrentTime())}var e,a;if(u==null)return nt(function(t){h(n,t)});e={name:null,source:f.YOUTUBE,url:null,totalTimeWatchedInSeconds:0,totalLengthInSeconds:0,inViewPort:!1,watched:!1,timestamp:Math.floor(+new Date/1e3),events:[]};t.videos.push(e);var c,l=!1,y=!0,p=n.src.indexOf("autoplay=1")>-1;a=o(function(n){e.totalTimeWatchedInSeconds+=n});c=new u.Player(n,{events:{onReady:function(){e.totalLengthInSeconds=Math.floor(c.getDuration());e.url=c.getVideoUrl();c.playerInfo&&c.playerInfo.videoData&&(e.name=c.playerInfo.videoData.title)},onStateChange:function(n){var f,h,t,o,s;switch(n.data){case u.PlayerState.ENDED:r(e,i.ENDED,v());a.stop();break;case u.PlayerState.PLAYING:t=v();y&&p?r(e,i.AUTOPLAY,t):(l&&(f=e.events.filter(function(n){return n.action===i.PAUSE}),f.length>0&&(h=f[f.length-1],h!=null&&Math.abs(t-h.startTimeInVideoInSeconds)>1&&r(e,i.SEEK,t))),r(e,l?i.RESUME:i.PLAY,t));l=!1;y=!1;e.watched=!0;a.start();break;case u.PlayerState.PAUSED:if(t=v(),o=e.events.filter(function(n){return n.action===i.PLAY||n.action===i.RESUME}),o.length>0&&(s=o[o.length-1],s!=null)){var k=Math.floor(+new Date/1e3),d=c.playerInfo&&c.playerInfo.playbackRate||1,w=d*(k-s.timestamp),g=t-s.startTimeInVideoInSeconds,b=Math.abs(w-g),nt=b/(w||1);b>1&&nt>.1&&r(e,i.SEEK,t)}r(e,i.PAUSE,t);l=!0;a.stop()}}}});s(e,n)}function nt(n){var t,i;typeof YT!="undefined"?window.YT.loaded?n(window.YT):window.YT.ready(function(){n(window.YT)}):(t=document.createElement("script"),t.src="https://www.youtube.com/iframe_api",t.addEventListener("load",function(){typeof YT!="undefined"&&window.YT.ready(function(){n(window.YT)})}),i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(t,i))}function bt(){var n=document.querySelectorAll("iframe[src*='player.vimeo.com/video']");n.length!==0&&tt(function(t){if(typeof t.Player=="function")for(var i=0;i<n.length;i++)c(n[i],t)})}function c(n,u){var e;if(u==null)return tt(function(t){c(n,t)});e={name:null,source:f.VIMEO,url:null,totalTimeWatchedInSeconds:0,totalLengthInSeconds:0,inViewPort:!1,watched:!1,timestamp:Math.floor(+new Date/1e3),events:[]};t.videos.push(e);var h,l=!1,v=!0,y=n.src.indexOf("autoplay=1")>-1,a=o(function(n){e.totalTimeWatchedInSeconds+=n});h=new u.Player(n);h.getVideoTitle().then(function(n){e.name=n});h.getVideoUrl().then(function(n){e.url=n},function(){e.url=n.src.replace(/\?.*$/,"")});h.getDuration().then(function(n){e.totalLengthInSeconds=Math.floor(n)});h.on("play",function(n){var t=Math.floor(n.seconds);v&&y?r(e,i.AUTOPLAY,t):r(e,l?i.RESUME:i.PLAY,t);l=!1;v=!1;e.watched=!0;a.start()});h.on("pause",function(n){var t=Math.floor(n.seconds);r(e,i.PAUSE,t);l=!0;a.stop()});h.on("ended",function(n){var t=Math.floor(n.seconds);r(e,i.ENDED,t);a.stop()});h.on("seeked",function(n){var t=Math.floor(n.seconds);r(e,i.SEEK,t)});s(e,n)}function tt(n){if(typeof Vimeo!="undefined")n(window.Vimeo);else{var t=document.createElement("script");t.src="https://player.vimeo.com/api/player.js";t.addEventListener("load",function(){typeof Vimeo!="undefined"&&n(window.Vimeo)});document.body.appendChild(t)}}function e(){return performance&&typeof performance.now=="function"&&performance.now()||+new Date}function kt(){var n=e(),i=Math.floor(n-t.timeOnPage.start),r=l.getTimeEngaged();return{totalTimeMillis:i,engagedTimeMillis:r}}function dt(){return{pixels:t.scrollDepth.pixels,percentage:t.scrollDepth.percentage}}function gt(){return t.links}function ni(){return t.events}function ti(){return t.umbracoForms}function it(){var n=kt(),t=dt(),i=gt(),r=ni(),u=ii(),f=ti();return{timeOnPage:n,scrollDepth:t,links:i,events:r,umbracoForms:f,videos:u}}function ii(){return t.videos}function ri(){if(t.pageviewGuid!=null){var n=it(),i="/umbraco/umarketingsuite/pagedata/collect?version="+t.version+"&pageviewGuid="+t.pageviewGuid;rt(i,n);ui()}}function rt(n,t){var r,u,i,f;typeof navigator.sendBeacon=="function"&&typeof Blob=="function"?(r={type:"application/json"},u=new Blob([JSON.stringify(t)],r),navigator.sendBeacon(n,u)):(i=new XMLHttpRequest,i.open("POST",n,!1),i.setRequestHeader("Content-Type","application/json"),f=JSON.stringify(t),i.send(f))}function ui(){var n,i,r;for(t.links.length=0,t.events.length=0,n=0;n<t.videos.length;n++)t.videos[n].events.length=0;for(i=0;i<t.umbracoForms.length;i++)r=t.umbracoForms[i],r.actions.length=0,r.errors.length=0}function fi(n,t){var i;return function(){var r=this,u=arguments,f=function(){i=null;n.apply(r,u)};clearTimeout(i);i=setTimeout(f,t)}}function ei(){function n(){var i=document.documentElement.offsetHeight,u=window.pageYOffset||document.documentElement.scrollTop,f=window.innerHeight,n=f+u,r=Math.round(Math.min(n,i)/i*100);r>t.scrollDepth.percentage&&(t.scrollDepth.percentage=r);n>t.scrollDepth.pixels&&(t.scrollDepth.pixels=Math.floor(n))}window.addEventListener("scroll",fi(n,100),!1);document.addEventListener("DOMContentLoaded",n);n()}function oi(n){t.events.push(n);rt("/umbraco/umarketingsuite/pagedata/collectevent",n)}var t,u,i,f,l;return function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(n){var t=this;do{if(Element.prototype.matches.call(t,n))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null})}(),t={pageviewGuid:null,version:5,timeOnPage:{start:e()},scrollDepth:{pixels:0,percentage:0},links:[],events:[],videos:[],umbracoForms:[]},u={FOCUS:"Focus",UNFOCUS_DATA_ENTERED:"UnfocusDataEntered",UNFOCUS_NO_DATA_ENTERED:"UnfocusNoDataEntered"},i={AUTOPLAY:"Autoplay",PLAY:"Play",PAUSE:"Pause",RESUME:"Resume",ENDED:"Ended",SEEK:"Seek"},f={FILE:"File",YOUTUBE:"YouTube",VIMEO:"Vimeo"},l=function(){function f(){return(new Date).getTime()}function o(){s();n=!0}function t(){n&&(n=!1,r=f());window.clearTimeout(u);u=window.setTimeout(o,5e3)}function i(n,t){window.addEventListener?window.addEventListener(n,t):window.attachEvent&&window.attachEvent("on"+n,t)}function s(){if(!n){var t=f();e+=t-r;r=t}}function h(){i("mousedown",t);i("keydown",t);i("scroll",t);i("mousemove",t);u=window.setTimeout(o,5e3)}function c(){return s(),e}var r=f(),e=0,n=!0,u;return{init:h,getTimeEngaged:c}}(),{init:ut,trackEvent:oi,getClientSideData:it,video:{trackVideoElement:g,trackYouTubeVideo:h,trackVimeoVideo:c}}}(),n}(window.uMarketingSuite||{});window.ums=window.ums||function(){function t(n){for(var t,i={},r=0;r<n.length;r++)if(t=n[r],typeof t=="string")switch(r){case 1:i.hitType=t;break;case 2:i.category=t;break;case 3:i.action=t;break;case 4:i.label=t}else if(typeof t=="number")i.value=t;else if(typeof t=="object"){Object.assign(i,t);break}return i}var n=function(){function n(n){n.timestamp=parseInt(+new Date/1e3,10);uMarketingSuite.analytics.trackEvent(n)}return{event:{send:n}}}(),i={event:{argumentParser:t,api:function(){return n.event}}};return function(n,t){var f,r,u,s;if(typeof n=="string"&&t!==""){if(f=Array.prototype.slice.call(arguments),Object.prototype.toString.call(t)==="[object Object]"){var h=t.eventCategory,c=t.eventAction,l=t.eventLabel,a=t.eventValue;t=t.hitType;f=[n,t,h,c,l,a]}if(typeof t=="string"&&t!==""&&(r=i[t],r)){var v=r.argumentParser(f),e=r.api(),o=null;for(u in e)if(e.hasOwnProperty(u)&&(s=new RegExp("^(?:([^.]+)\\.)?"+u+"$","i"),s.test(n))){o=e[u];break}if(o)try{o(v)}catch(y){}}}}}();